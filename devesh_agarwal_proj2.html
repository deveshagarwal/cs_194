<h1 style="text-align: center;"><span style="color: #808080;">Project 02</span></h1>
<h2 style="text-align: center;"><span style="color: #993300;"><em>Fun with Filters and Frequencies!</em></span></h2>
<h3 style="text-align: right;"><span style="color: #808080;">Devesh Agarwal</span></h3>
<hr />
<p style="text-align: center;"><span style="color: #808080;">&ldquo;There's nothing quite as intense as the moment of clarity when you suddenly see what's really possible for you.&rdquo;</span></p>
<p></p>



<h3><span style="color: #993300;">1.1 Finite Difference Operators</span></h3>
<p><span style="color: #000000;"> In the first step of this project, we can identify the edges existing within the image by using gradients (partial derivatives) to determine the color movements and predict edges. We then use the root sqaured sum of gradients to produce the gradient magnitude image pictured below. Finally, we use different threshold values to enhance our image. &nbsp;</span></p>
<p><span style="color: #000000;"> There is a tradeoff between edge accuracy and noise.   &nbsp;</span></p>

<table style="height: 202px; margin-left: auto; margin-right: auto;" width="519">
<tbody>
<tr>

<td style="width: 252px;"><img src="cameraman.png" width="300" /> <figcaption> Camera Man, Original Image</figcaption>  </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="gradientmagnitudex.png" width="300" /> <figcaption> Camera Man, x Gradient Magnitude </figcaption> </td>
<td style="width: 252px;"></td>
</td>
</tr>
</tbody>
</table>


<table style="height: 202px; margin-left: auto; margin-right: auto;" width="519">
<tbody>
<tr>

<td style="width: 252px;"><img src="cameraman.png" width="300" /> <figcaption> Camera Man, Original Image</figcaption>  </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="thresholded08.jpg" width="300" /> <figcaption> Camera Man, 0.08 Thresholding </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="thresholded20.jpg" width="300" /> <figcaption> Camera Man, 0.20 Thresholding </figcaption> </td>
<td style="width: 252px;"></td>
</tr>
</tbody>
</table>

<h3><span style="color: #993300;">1.2 Derivative of Gaussian Filters</span></h3>
<p><span style="color: #000000;"> We can eliminate noise in the gradients we compute using two possilble means:  &nbsp;</span></p>
<ul style="list-style-type: square;">
<li> <bold> Using the Gaussian kernel: </bold> produce a blurred version of the original image that produces a low-resolution image. </li>
<li> Using the Derivative of Gaussian (DoG) Filter: Find the derivative on both the x and y axis and convolve Gaussian with (dx, dy), then convolve with original image using the differentiated gaussian filter. </li>
</ul>

<table style="height: 202px; margin-left: auto; margin-right: auto;" width="519">
<tbody>
<tr>

<td style="width: 252px;"><img src="12way1.png" width="300" /> <figcaption> Method 1 </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="12way2.png" width="300" /> <figcaption> Method 2 </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="camera2threshold.png" width="300" /> <figcaption> Thresholded (0.10) </figcaption> </td>
<td style="width: 252px;"></td>


</tr>
</tbody>
</table>

<p><span style="color: #000000;"> We can confirm looking at the images above, that either approach produces the same effect on our original image and yields the same results.   &nbsp;</span></p>

<h3><span style="color: #993300;"> 1.3: Image Straightening</span></h3>
<p><span style="color: #000000;"> Often images we are provided with can be at an angle or feature subjects that would benefit from correction of angle. This can be effected by producing a rotating effect. Luckily, gradient imaging allows us to anticipate vertical and horizontal edges inside of an image. This allows us to be able to calculate a metric from the 'straightness' of an image. Below we can see some images I rotated using this method and histograms that represent the angular edges. &nbsp;</span></p>

<p><span style="color: #000000;"> Here I also include a failure case where straight and valid edges are not easily discernable. While some amount of 'straightening' does occur, the resulting image does not appear to look significantly affected at all. &nbsp;</span></p>

<table style="height: 202px; margin-left: auto; margin-right: auto;" width="519">
<tbody>
<tr>

<td style="width: 252px;"><img src="facade.jpg" width="300" /> <figcaption> Facade, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="facadehist1.png" width="300" /> <figcaption> Original Histogram </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="facadedone.jpg" width="300" /> <figcaption> Facade, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="facadehist2.png" width="300" /> <figcaption> New Histogram </figcaption> </td>
<td style="width: 252px;"></td>
</tr>

<tr>
<td style="width: 252px;"><img src="writing.jpg" width="300" /> <figcaption> Writing, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="writinghist1.png" width="300" /> <figcaption> Original Histogram </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="rotatedwriting.jpg" width="300" /> <figcaption> Writing, Straightened </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="writinghist2.png" width="300" /> <figcaption> New Histogram </figcaption> </td>
<td style="width: 252px;"></td>
</tr>



<tr>
<td style="width: 252px;"><img src="michael.jpg" width="300" /> <figcaption> Michael Jackson, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="mjhist1.png" width="300" /> <figcaption> Michael Jackson, Original Histogram </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="rotatedmichael.jpg" width="300" /> <figcaption> Michael Jackson, Straightened </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="mjhist2.png" width="300" /> <figcaption> Michael Jackson, Corrected Histogram </figcaption> </td>
<td style="width: 252px;"></td>
</tr>


</tbody>
</table>


Failure Case

<table style="height: 202px; margin-left: auto; margin-right: auto;" width="519">
<tbody>

<tr>
<td style="width: 252px;"><img src="curves.jpg" width="300" /> <figcaption> Curves, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="curveshist1.png" width="300" /> <figcaption> Curves, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="rotatedcurves.jpg" width="300" /> <figcaption> Curves, "Straightened" </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="curveshist2.png" width="300" /> <figcaption> Curves, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
</tr>
</tbody>
</table>

<h3><span style="color: #993300;"> 2.1 Image 'Sharpening'</span></h3>

<p><span style="color: #000000;"> Using a Gaussian filter, the convolution that results with the original image is low resolution and contains the low frequency part of the image. Using simple, matrix arithmetic we can yield the high frequency part of the image and use it to sharpen the blurred image. Here are some examples of sharpened images from blurred images.  &nbsp;</span></p>


<table style="height: 202px; margin-left: auto; margin-right: auto;" width="519">
<tbody>
<tr>

<td style="width: 252px;"><img src="taj.jpg" width="300" /> <figcaption> Taj, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="tajblurry.jpg" width="300" /> <figcaption> Taj, Blurry </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="tajdone.jpg" width="300" /> <figcaption> Taj, Sharpened </figcaption> </td>
<td style="width: 252px;"></td>
</tr>

<td style="width: 252px;"><img src="marvel.jpg" width="300" /> <figcaption> Marvel, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="marvelblurry.jpg" width="300" /> <figcaption> Marvel, Blurry </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="marveldone.jpg" width="300" /> <figcaption> Marvel, Sharpened </figcaption> </td>
<td style="width: 252px;"></td>
</tr>

<td style="width: 252px;"><img src="jupiter.jpg" width="300" /> <figcaption> Jupiter, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="jupiterblurry.jpg" width="300" /> <figcaption> Jupiter, Blurry </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="jupiterdone.jpg" width="300" /> <figcaption> Jupiter, Sharpened </figcaption> </td>
<td style="width: 252px;"></td>
</tr>


</tbody>
</table>

</tbody>
</table>


<h3><span style="color: #993300;"> 2.2 Hybrid Images </span></h3>

<p><span style="color: #000000;"> Gaussian and Laplacian filters allow us to produce images that are hybrids of any two images. In order to do this we can use the low-frequency part of one image and the high-frequency part of another to simulate a hybrid picture. This yields an image that appears like one image from close by and the other image from a further vantage point. I was able to solve for cross contamination between the filters by adding seperate filters on the channels and combining them to produced colorized pure images. I have also provided a visualization of the log magnitudes of the fourier transforms for the low-frequency and high-frequency parts of the images, as well as the combined hybrid image. Here, we can also see some cases that work really well - similar pictures with more alignment have more scope of hhybridization. I have also provided failure cases such as the man and the tree which can not be hybridized using the same principles. &nbsp;</span></p>


<table style="height: 202px; margin-left: auto; margin-right: auto;" width="519">
<tbody>
<tr>


<td style="width: 252px;"><img src="DerekPicture.jpg" width="300" /> <figcaption> Derek, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="nutmeg.jpg" width="300" /> <figcaption> Cat, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="derekcat.jpg" width="300" /> <figcaption> DerekCat, Hybrid </figcaption> </td>
<td style="width: 252px;"></td>
</tr>



<tr>
<td style="width: 252px;"><img src="dereklowresfft.png" width="300" /> <figcaption> Derek, Low Resolution Fourier Transform </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="cathighresfft.png" width="300" /> <figcaption> Nutmeg, High Resolution Fourier Transform  </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="mixfft.png" width="300" /> <figcaption> Hybrid Fourier Transform </figcaption> </td>
<td style="width: 252px;"></td>
</tr>

<tr>
<td style="width: 252px;"><img src="trump.jpg" width="300" /> <figcaption> Trump, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="boris.jpg" width="300" /> <figcaption> Boris, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="trumporis.jpg" width="300" /> <figcaption> Generic White Megalomaniac, Hybrid </figcaption> </td>
<td style="width: 252px;"></td>
</tr>

<tr>
<td style="width: 252px;"><img src="hp.jpg" width="300" /> <figcaption> Mr. Potter, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="voldermort.jpeg" width="300" /> <figcaption> He who must not be named, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="harrymort.png" width="300" /> <figcaption> He who should not be named, Hybrid </figcaption> </td>
<td style="width: 252px;"></td>
</tr>


<tr>
<td style="width: 252px;"><img src="lupin.jpg" width="300" /> <figcaption> Remus Lupin, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="wolf.jpg" width="300" /> <figcaption> Werewolf, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="remuswolfpin.png" width="300" /> <figcaption> Poor CGI, Hybrid </figcaption> </td>
<td style="width: 252px;"></td>
</tr>

</tbody>
</table>



Failure Case: 



<table style="height: 202px; margin-left: auto; margin-right: auto;" width="519">
<tbody>
<tr>


<td style="width: 252px;"><img src="man.jpg" width="300" /> <figcaption> Man, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="tree.jpg" width="240" /> <figcaption> Tree, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="mantree.png" width="300" /> <figcaption> Mantree (no), Hybrid </figcaption> </td>
<td style="width: 252px;"></td>
</tr>
</tbody>
</table>




<h3><span style="color: #993300;"> 2.3: Gaussian and Laplacian Stacks </span></h3>

<p><span style="color: #000000;"> To produce a Gaussian stack, I repeated the process of Gaussian filtering on a hybridized image. Similarly, to produce a Laplacian stack, I used the respective differences from the Guassian and Original to obtain Laplacian filters. I tried various Sigmas from 2 to 32 to obtain the results as demonstrated below. I used the same process on Trumporis, one of my hybrid creations to see the stacks form the separated entitites.      &nbsp;</span></p>


<table style="height: 202px; margin-left: auto; margin-right: auto;" width="519">
<tbody>
<tr>


<td style="width: 252px;"><img src="lincoln.jpg" width="200" /> <figcaption> Lincoln, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="lap0.jpg" width="200" /> <figcaption> Laplacian Stack, depth (n) = 0 </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="lap1.jpg" width="200" /> <figcaption> Laplacian Stack, depth (n) = 1  </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="lap2.jpg" width="200" /> <figcaption> Laplacian Stack, depth (n) = 2  </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="lap3.jpg" width="200" /> <figcaption> Laplacian Stack, depth (n) = 3  </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="lap4.jpg" width="200" /> <figcaption> Laplacian Stack, depth (n) = 4  </figcaption> </td>
<td style="width: 252px;"></td>

</tr>

<tr>


<td style="width: 252px;"><img src="lincoln.jpg" width="200" /> <figcaption> Lincoln, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="gas0.jpg" width="200" /> <figcaption> Gaussian Stack, depth (n) = 0 </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="gas1.jpg" width="200" /> <figcaption>  Gaussian Stack, depth (n) = 1 </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="gas2.jpg" width="200" /> <figcaption>  Gaussian Stack, depth (n) = 2 </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="gas3.jpg" width="200" /> <figcaption>  Gaussian Stack, depth (n) = 3 </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="gas4.jpg" width="200" /> <figcaption>  Gaussian Stack, depth (n) = 4 </figcaption> </td>
<td style="width: 252px;"></td>

</tr>

<tr>


<td style="width: 252px;"><img src="trumporis.jpg" width="200" /> <figcaption> Trumporis, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="p2_lap0.jpg" width="200" /> <figcaption> Laplacian Stack, depth (n) = 0 </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="p2_lap1.jpg" width="200" /> <figcaption> Laplacian Stack, depth (n) = 1  </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="p2_lap2.jpg" width="200" /> <figcaption> Laplacian Stack, depth (n) = 2  </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="p2_lap3.jpg" width="200" /> <figcaption> Laplacian Stack, depth (n) = 3  </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="p2_lap4.jpg" width="200" /> <figcaption> Laplacian Stack, depth (n) = 4  </figcaption> </td>
<td style="width: 252px;"></td>

</tr>

<tr>


<td style="width: 252px;"><img src="trumporis.jpg" width="200" /> <figcaption> Trumporis, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="p2_gas0.jpg" width="200" /> <figcaption> Gaussian Stack, depth (n) = 0 </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="p2_gas1.jpg" width="200" /> <figcaption>  Gaussian Stack, depth (n) = 1 </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="p2_gas2.jpg" width="200" /> <figcaption>  Gaussian Stack, depth (n) = 2 </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="p2_gas3.jpg" width="200" /> <figcaption>  Gaussian Stack, depth (n) = 3 </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="p2_gas4.jpg" width="200" /> <figcaption>  Gaussian Stack, depth (n) = 4 </figcaption> </td>
<td style="width: 252px;"></td>

</tr>


</tbody>
</table>

<h3><span style="color: #993300;"> 2.4:  Multi-Resolution Blending </span></h3>

<p><span style="color: #000000;"> We use Burt and Adelson's <a href= 'http://persci.mit.edu/pub_pdfs/spline83.pdf'> paper, "A Multiresolution Spline With Application to
Image Mosaics"</a> to formulate an algorithm that can provide multi-resolution blending of two or more images into a larger image mosiac. This process uses the stacks we learnt how to make in 2.3 to use masks and blend the stacked images. This includes blurring the seams of the image along the edge of the mask to produce a seamless blend in the images. Here are some custom creations of my own!      &nbsp;</span></p>

<table style="height: 202px; margin-left: auto; margin-right: auto;" width="519">
<tbody>
<tr>


<td style="width: 252px;"><img src="orange.jpg" width="200" /> <figcaption> Orange, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="apple.jpg" width="200" /> <figcaption> Apple, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="mask1.png" width="200" /> <figcaption> Mask </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="oraple.jpg" width="200" /> <figcaption> Oraple </figcaption> </td>
<td style="width: 252px;"></td>
</tr>

<tr>


<td style="width: 252px;"><img src="camera.jpg" width="200" /> <figcaption> Camera, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="eyeball.jpg" width="200" /> <figcaption> Eye, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="circular.png" width="200" /> <figcaption> Circular Mask </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="eyecamera.jpg" width="200" /> <figcaption> Eyehole Camera </figcaption> </td>
<td style="width: 252px;"></td>
</tr>

<tr>


<td style="width: 252px;"><img src="plate.jpg" width="200" /> <figcaption> Plate, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="city.jpeg" width="200" /> <figcaption> City Aerial View, Original Image </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="circular.png" width="200" /> <figcaption> Circular Mask </figcaption> </td>
<td style="width: 252px;"></td>
<td style="width: 252px;"><img src="cityonplate.jpg" width="200" /> <figcaption> City on a Plate </figcaption> </td>
<td style="width: 252px;"></td>
</tr>


</tbody>
</table>


<h3><span style="color: #993300;"> Conclusion </span></h3>

<p><span style="color: #000000;"> This project was an amazing learning experience for me! As a picture above demonstrates, I realized that there is very little difference between the eye and the lens of a camera. Human visual interpretation is all about pattern finding in the wild, and in this project I was able to find patterns or create them in some visuals that I had only imagined in the past. This project was a testament to expression. I learnt how to visually express thoughts and feelings through a blend of pictures.   </span></p>
